<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8"/>
<title>行测-题目详情</title>
<!-- 如果 CDN 仍然失败，可把下面 link 换成任意可访问的 Bootstrap5 CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body{padding-bottom:70px;background:#f7f7f7;}
  .top-bar{background:#fff;border-bottom:1px solid #e5e5e5;position:sticky;top:0;z-index:1000;}
  .card-question{background:#fff;border-radius:8px;margin-top:12px;padding:18px;}
  .option-block{margin:8px 0;padding:12px;border:1px solid #ced4da;border-radius:6px;cursor:pointer;transition:.2s;}
  .option-block:hover{background:#f1f3f5;}
  .correct{border-color:#28a745;background:#d4edda;color:#155724;}
  .wrong{border-color:#dc3545;background:#f8d7da;color:#721c24;}
.bottom-result{
  margin-top:12px;
  font-weight:600;
  display:none;
  line-height:1.8;
}
.bottom-result span{
  margin:0 6px;
  padding:2px 8px;
  border-radius:4px;
  color:#fff;
}
.bottom-result .correct{background:#28a745;}
.bottom-result .wrong{background:#dc3545;}
  /* 弹窗报告样式 */
  .report-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:none;justify-content:center;align-items:center;z-index:2000;}
  .report-content{background:#fff;border-radius:8px;padding:20px;max-width:400px;width:90%;}
</style>
</head>
<body>

<!-- 顶部返回栏 -->
<nav class="top-bar d-flex align-items-center px-3 py-2">
  <a href="javascript:history.back()" class="text-dark me-3">＜ 返回</a>
  <span class="fw-bold">演讲-练习</span>
  <span class="ms-auto badge bg-secondary" id="counter">第 1 题 / 共 4 题</span>
</nav>

<!-- 题目区域 -->
<div class="container">
  <div class="card-question" id="questionBox">
    <!-- JS 渲染 -->
  </div>
</div>

<!-- 结果条 -->
<div class="bottom-result" id="resultBar"></div>

<!-- 底部导航 -->
<div class="d-flex justify-content-between px-3 py-2 bg-white fixed-bottom border-top">
  <button class="btn btn-outline-secondary" onclick="prev()" style="margin-left: 500px ;">上一题</button>
  <button class="btn btn-outline-secondary" onclick="next()">下一题</button>
  <button class="btn btn-outline-primary" onclick="showReport()" style="margin-right: 500px;">查看报告</button>
</div>

<!-- 报告弹窗 -->
<div class="report-modal" id="reportModal" onclick="closeReport()">
  <div class="report-content" onclick="event.stopPropagation()">
    <h5 class="mb-3">答题报告</h5>
    <p id="reportText"></p>
    <button class="btn btn-secondary" onclick="closeReport()">关闭</button>
  </div>
</div>

<script>
/* ========== 题库 ========== */
const questions = [
  {
    stem:`年度热词,大事小情,不仅反映国家大事、时代主旋律,还有对老百姓日常生活的深切____,展现了过去一年的社会变迁和生活万象。而透过“内卷”“躺平”“鸡娃”“双减”“干饭人”等热词,我们还可____当下独特的社会景观。`,
    options:[
      'A. 描绘 切合 感触 了解',
      'B. 体现 把握 体验 感受',
      'C. 勾勒 蕴含 体察 窥见',
      'D. 叙写 贴近 关怀 透视'
    ],
    answer:2   // C
  },
  {
    stem:`算法歧视是以算法为手段实施的歧视，主要指在大数据背景下、依靠机器计算的自动决策系统在对数据主体做出决策分析时，由于数据和算法本身不具有中立性或者隐含错误、被人为操控等原因，对数据主体进行差别对待，造成歧视性后果。根据上述定义，下列属于算法歧视的是：`,
    options:[
      'A. 某平台根据性别推荐不同职位',
      'B. 某 App 根据用户历史推荐新闻',
      'C. 某医院按病情严重程度排队',
      'D. 某银行随机抽选客户赠礼'
    ],
    answer:0  // A
  },
  {
    stem:`<img src="https://via.placeholder.com/120x60?text=图1" class="img-fluid me-1"><img src="https://via.placeholder.com/120x60?text=图2" class="img-fluid me-1"><img src="https://via.placeholder.com/120x60?text=图3" class="img-fluid me-1">（&nbsp;&nbsp;）`,
    options:['A. 12','B. 14','C. 16','D. 18'],
    answer:1  // B
  },
  {
    stem:`<img src="https://via.placeholder.com/120x60?text=图A" class="img-fluid">14<img src="https://via.placeholder.com/120x60?text=图B" class="img-fluid">（&nbsp;&nbsp;）`,
    options:['A. 12','B. 13','C. 14','D. 15'],
    answer:2  // C
  }
];

/* ========== 状态 ========== */
let currentIndex = 0;                     // 当前题号
const userAnswers = Array(questions.length).fill(null); // 每题用户答案
const correctFlags = Array(questions.length).fill(false); // 每题是否正确

/* ========== 渲染题目 ========== */
function renderQuestion(idx){
  const q = questions[idx];
  document.getElementById('counter').textContent = `第 ${idx+1} 题 / 共 ${questions.length} 题`;
  const box = document.getElementById('questionBox');
  box.innerHTML = `
    <div class="mb-3"><span class="badge bg-primary me-2">单选题</span></div>
    <div class="mb-3">${q.stem}</div>
    <div id="optionArea"></div>
    <div id="resultBar" class="bottom-result"></div>
  `;

  const optionArea = document.getElementById('optionArea');
  q.options.forEach((opt,i)=>{
    const div = document.createElement('div');
    div.className='option-block';
    div.dataset.idx=i;
    div.innerHTML=opt;
    div.onclick = ()=> selectAnswer(i);
    optionArea.appendChild(div);
  });

  if(userAnswers[idx]!==null){
    markOptions();
  }else{
    document.getElementById('resultBar').style.display='none';
  }
}

/* ========== 选择答案 ========== */
function selectAnswer(selectIdx){
  if(userAnswers[currentIndex]!==null) return; // 已作答不再处理
  userAnswers[currentIndex] = selectIdx;
  correctFlags[currentIndex] = (selectIdx === questions[currentIndex].answer);
  markOptions();
  showResult();
}

/* ========== 标记选项 ========== */
function markOptions(){
  const q = questions[currentIndex];
  const opts = document.querySelectorAll('.option-block');
  opts.forEach((o,i)=>{
    o.onclick=null;
    if(i===q.answer){
      o.classList.add('correct');
    }else if(i===userAnswers[currentIndex] && i!==q.answer){
      o.classList.add('wrong');
    }
  });
}

/* ========== 底部结果条 ========== */
function showResult(){
  const bar = document.getElementById('resultBar');
  const q = questions[currentIndex];
  const myLetter   = String.fromCharCode(65 + userAnswers[currentIndex]);   // A/B/C/D
  const trueLetter = String.fromCharCode(65 + q.answer);

  bar.innerHTML =
    `我的答案：<span class="${correctFlags[currentIndex]?'correct':'wrong'}">${myLetter}</span>`+
    `  正确答案：<span class="correct">${trueLetter}</span>`;

  bar.style.display='block';
}

/* ========== 上一题 / 下一题 ========== */
function prev(){
  if(currentIndex>0){
    currentIndex--;
    renderQuestion(currentIndex);
  }
}
function next(){
  if(currentIndex<questions.length-1){
    currentIndex++;
    renderQuestion(currentIndex);
  }
}

/* ========== 报告弹窗 ========== */
function showReport(){
  const answeredCnt = userAnswers.filter(x=>x!==null).length;
  const rightCnt = correctFlags.filter(x=>x).length;
  const rate = answeredCnt? (rightCnt/answeredCnt*100).toFixed(1)+'%' : '0%';
  let html = `已答题：${answeredCnt}/${questions.length}<br>答对：${rightCnt}<br>正确率：${rate}<br><hr>`;
  questions.forEach((q,i)=>{
    if(userAnswers[i]!==null){
      html += `第${i+1}题：${correctFlags[i]?'✅':'❌'} 你的选择：${q.options[userAnswers[i]]} | 正确答案：${q.options[q.answer]}<br>`;
    }else{
      html += `第${i+1}题：未作答<br>`;
    }
  });
  document.getElementById('reportText').innerHTML = html;
  document.getElementById('reportModal').style.display='flex';
}
function closeReport(){
  document.getElementById('reportModal').style.display='none';
}

/* ========== 初始化 ========== */
renderQuestion(currentIndex);
</script>
</body>
</html>